---
layout: post
title: CSS Image Effects &num;4&colon; Bokeh Effects
permalink: /bokeh
date: '2015-10-18'
comments: true
tags:
- development
- design
- css
- sass
- filter
- blend mode
- photo
- effect
- vignette
subtitle: Bokeh textures are very popular in photography. Let's take a look at how to create our own.
header-bg: ../images/posts/css-effects/4/bokeh-ex1.jpg
---

<style>
.doggie {
  width: 100%;
  height: 200px;
  display: block;
  position: relative;
  background-image: url('../images/posts/css-effects/4/dog-model.jpg');
  background-position: 50%;
  background-size: cover;
}
.snow {
  width: 100%;
  height: 200px;
  display: block;
  position: relative;
  background-image: url('../images/posts/css-effects/4/snow-overlay.jpg');
  background-position: 50%;
  background-size: cover;
}
.snow-me:after {
    content: '';
    position: absolute;
    top: 0; left: 0;
    display: block;
    width: 100%;
    height: 200px;
    background-image: url('../images/posts/css-effects/4/snow-overlay.jpg');
    background-size: cover;
    mix-blend-mode: screen;
  }
}
</style>

This is part of a series of posts breaking down visual effects using CSS filters and blend modes. Read [Part 1: The Vintage Washout Effect](/vintage-washout), [Part 2: 3d Glasses](/3d-effect), and [Part 3: Vignettes](/vignettes) for some background on blend modes. In this post we'll explore a popular photography technique called bokeh and how to recreate the illusion of a bokeh-style image.

## So What is Bokeh?

<figure class="right" style="margin-top: -3em">
<img src="../images/posts/css-effects/4/bokeh-ex2.jpg" alt="">
  <figcaption>A little bokeh <a href="http://digital-photography-school.com/how-to-take-beautiful-bokeh-christmas-images-with-31-stunning-examples/">how-to</a>.</figcaption>
</figure>

Bokeh is a photography technique that creates intentional blur for visual effect. The name itself stems from the Japanese word for blur or haze: boke. <sup><a href="http://www.pocket-lint.com/news/127591-what-is-bokeh-here-s-the-photography-effect-explained">1</a></sup> Technically, any image with a blur in it can be considred bokeh, but they are most distinguished by the imagery of large circluar forms on photographs.

Christmas lights are popularly used to get this effect, and so are night scenes. Often, bokeh photography is simple round shapes, but can also include subjects in the foreground. Let's look into how we can recreate the illusion of bokeh photography in CSS.

## Applying Texture

Let's start with some blend modes &mdash; particularly multiply and screen are going to be your friends when applying texture (also Google). All you really need to do is layer a texture on top of an image and `multiply` if the texture is white, or `screen` if the texture is on a black background. It's super easy!

<figure class="third">
  <div class="doggie"></div><br>
  <figcaption>Just a doggie with a red hat.</figcaption>
</figure>

<figure class="third">
  <div class="snow"></div><br>
  <figcaption>Snow overlay.</figcaption>
</figure>


<figure class="third">
  <div class="doggie snow-me"></div><br>
  <figcaption>Doggie with pseudo-element containing snow overlay and <code>mix-blend-mode: screen</code><br> (See <a href="http://codepen.io/una/pen/Qjgojy">Codepen</a>)</figcaption>
</figure>

<div class="clearfix"></div>

See, aren't blend modes fun? ðŸ˜Š There are so many textures you can play with. Just Google search what you're looking for, and feel free to get carried away.

## CSS Gradients

CSS Gradients and box shadows are extremely powerful for creating a variety of [visualizations](http://a.singlediv.com/). We can leverage them for building custom bokeh effects, too! Check out the [Vignette article](http://una.im/vignettes) for more of a baseline on gradients.

<div class="half--left">
  <div class="radial-1"></div>
</div>
<div class="half--right"><style contenteditable class="live-code">.radial-1 {
  background: radial-gradient(hotpink, transparent);
  height: 180px;
}
</style></div>
<div class="clearfix"></div>

We can make this gradient become a distinct circle by making sure the stops overlap, like so:

<div class="half--right">
  <div class="radial-2"></div>
</div>
<div class="half--left"><style contenteditable class="live-code">.radial-2 {
  background: radial-gradient(hotpink, hotpink 40%, transparent 40%, transparent);
  height: 180px;
}
</style></div>
<div class="clearfix"></div>

To make this look more like a bokeh effect, however, we'll want to make this a circular shape and maybe have a bit of blur on the edges. Keep in mind, we can also position this circle anywhere within the element:

<div class="half--left">
  <div class="radial-3"></div>
</div>
<div class="half--right"><style contenteditable class="live-code">.radial-3 {
  background: radial-gradient(circle at center, hotpink, hotpink 40%, transparent 42%, transparent);
  height: 180px;
}
</style></div>

## Creating Bokeh Patterns

Now, we're almost there. The really fun thing about CSS gradients is that you can have as many as you'd like. You can use the above technique combined with positioning to create entire patterns like this:

<figure class="bokehs">
</figure>

<style contenteditable class="live-code">/*
you can edit me!
*/

.bokehs {
  width: 100%;
  height: 400px;
  background:
    radial-gradient(90px at 500px 200px, rgba(255, 105, 180, .4), rgba(255, 105, 180, .4) 97%, transparent),
    radial-gradient(40px at 200px 80px, rgba(255, 99, 71, .7), rgba(255, 99, 71, .7) 94%, transparent),
    radial-gradient(70px at 100px 50px, rgba(255, 20, 147, .6), rgba(255, 20, 147, .6) 96%, transparent),
    radial-gradient(120px at 50px 300px, rgba(255, 105, 150, .6), rgba(255, 105, 150, .6) 97%, transparent),
    radial-gradient(30px at 300px 90px, rgba(255, 192, 203, .7), rgba(255, 192, 203, 0.7) 96%, transparent),
    radial-gradient(50px at 120px 150px, rgba(255, 192, 203, 0.6), rgba(255, 192, 203, 0.6) 95%, transparent),
    radial-gradient(60px at 230px 40px, rgba(255, 99, 71, .68), rgba(255, 99, 71, .68) 94%, transparent),
    radial-gradient(80px at 160px 170px, rgba(255, 20, 147, .4), rgba(255, 20, 147, .4) 96%, transparent),
    radial-gradient(100px at 0px 210px, rgba(255, 105, 180, .5), rgba(255, 105, 180, .5) 97%, transparent),
    radial-gradient(40px at 250px 190px, rgba(255, 192, 203, .8), rgba(255, 192, 203, .8) 96%, transparent),
    radial-gradient(50px at 220px 250px, rgba(255, 182, 193, .6), rgba(255, 182, 193, .6) 95%, transparent);
}
</style>

<aside>Please note: nobody said this was a good idea for performance.</aside>

## Randomly Generated Bokeh

And the best part is that you can take that and randomize it! Since this series is sticking to CSS &mdash; I'll show you an example of using the Sass `random()` function to create this effect without all of that typing. Now, keep in mind, Sass compiles to CSS, so `random()` is **not truly "random"** upon page refresh, but it is random upon each recompilation.

So let's start with a Sass function for a single Bokeh:

```scss
// Sass
@function randomBokeh($size: 100, $spread: 3) {
  $randomColor: rgba(random()*255, random()*255, random()*255, random());
  $singleBokeh: radial-gradient(random()*$size+px at random()*$size*$spread+px random()*$size*$spread+px, $randomColor, $randomColor 96%, transparent);
  @return $singleBokeh;
}

.bokehs {
  width: 100%;
  height: 400px;
  background: randomBokeh();
}
```

```css
/* CSS Output */
.bokehs {
  width: 100%;
  height: 400px;
  background: radial-gradient(29.73333px at 17.50791px 7.48488px, rgba(100, 168, 142, 0.97455), rgba(100, 168, 142, 0.97455) 96%, rgba(0, 0, 0, 0));
}
```

Now, we can create a Sass function to loop through and make as many bokehs as we want!

```scss
// All the bokehs
@function gimmeBokehs($howMany: 10, $size: 100, $spread: 3) {
  $bgList: ();
  @for $i from 1 through $howMany {
    $bgList: append($bgList, randomBokeh($size, $spread), comma);
  }
  @return $bgList;
}

.bokehs {
  width: 100%;
  height: 400px;
  background: gimmeBokehs(20, 50, 6)
}
```

```css
/* CSS Outut */
.bokehs {
  width: 100%;
  height: 400px;
  background: radial-gradient(18.78024px at 269.66465px 74.15366px, rgba(238, 230, 167, 0.34378), rgba(238, 230, 167, 0.34378) 96%, rgba(0, 0, 0, 0)), radial-gradient(34.83685px at 203.91725px 150.58783px, rgba(67, 107, 212, 0.47998), rgba(67, 107, 212, 0.47998) 96%, rgba(0, 0, 0, 0)), radial-gradient(38.82235px at 253.77045px 8.36277px, rgba(169, 124, 5, 0.06761), rgba(169, 124, 5, 0.06761) 96%, rgba(0, 0, 0, 0)), radial-gradient(41.30667px at 35.6084px 161.06054px, rgba(204, 31, 51, 0.3818), rgba(204, 31, 51, 0.3818) 96%, rgba(0, 0, 0, 0)), radial-gradient(38.00013px at 243.35356px 191.17846px, rgba(111, 223, 137, 0.84371), rgba(111, 223, 137, 0.84371) 96%, rgba(0, 0, 0, 0)), radial-gradient(12.14057px at 59.95475px 42.66822px, rgba(111, 20, 44, 0.56826), rgba(111, 20, 44, 0.56826) 96%, rgba(0, 0, 0, 0)), radial-gradient(25.29338px at 280.65497px 148.94768px, rgba(167, 31, 180, 0.7635), rgba(167, 31, 180, 0.7635) 96%, rgba(0, 0, 0, 0)), radial-gradient(6.28982px at 70.22695px 57.50014px, rgba(135, 67, 201, 0.89495), rgba(135, 67, 201, 0.89495) 96%, rgba(0, 0, 0, 0)), radial-gradient(10.79692px at 207.02352px 190.72594px, rgba(73, 172, 253, 0.72339), rgba(73, 172, 253, 0.72339) 96%, rgba(0, 0, 0, 0)), radial-gradient(29.33024px at 95.94448px 160.1365px, rgba(52, 193, 219, 0.74824), rgba(52, 193, 219, 0.74824) 96%, rgba(0, 0, 0, 0)), radial-gradient(16.04637px at 281.72386px 61.68872px, rgba(153, 86, 120, 0.59572), rgba(153, 86, 120, 0.59572) 96%, rgba(0, 0, 0, 0)), radial-gradient(26.23303px at 274.60903px 161.13904px, rgba(146, 130, 84, 0.8445), rgba(146, 130, 84, 0.8445) 96%, rgba(0, 0, 0, 0)), radial-gradient(20.63215px at 177.10505px 13.37177px, rgba(171, 24, 100, 0.71356), rgba(171, 24, 100, 0.71356) 96%, rgba(0, 0, 0, 0)), radial-gradient(27.39458px at 198.96598px 249.46414px, rgba(31, 172, 124, 0.12471), rgba(31, 172, 124, 0.12471) 96%, rgba(0, 0, 0, 0)), radial-gradient(37.28474px at 0.05144px 35.71232px, rgba(202, 55, 218, 0.1337), rgba(202, 55, 218, 0.1337) 96%, rgba(0, 0, 0, 0)), radial-gradient(48.12463px at 180.02515px 131.59507px, rgba(142, 88, 157, 0.91617), rgba(142, 88, 157, 0.91617) 96%, rgba(0, 0, 0, 0)), radial-gradient(35.66572px at 185.22354px 80.92422px, rgba(196, 169, 128, 0.51915), rgba(196, 169, 128, 0.51915) 96%, rgba(0, 0, 0, 0)), radial-gradient(28.66376px at 110.45366px 187.26299px, rgba(120, 74, 76, 0.51067), rgba(120, 74, 76, 0.51067) 96%, rgba(0, 0, 0, 0)), radial-gradient(47.38809px at 296.95973px 143.94716px, rgba(216, 126, 230, 0.73041), rgba(216, 126, 230, 0.73041) 96%, rgba(0, 0, 0, 0)), radial-gradient(34.05307px at 50.74134px 181.27114px, rgba(4, 8, 250, 0.22426), rgba(4, 8, 250, 0.22426) 96%, rgba(0, 0, 0, 0));
}
```

<style>
.bokehs-rando {
  width: 100%;
  height: 400px;
  background: radial-gradient(18.78024px at 269.66465px 74.15366px, rgba(238, 230, 167, 0.34378), rgba(238, 230, 167, 0.34378) 96%, rgba(0, 0, 0, 0)), radial-gradient(34.83685px at 203.91725px 150.58783px, rgba(67, 107, 212, 0.47998), rgba(67, 107, 212, 0.47998) 96%, rgba(0, 0, 0, 0)), radial-gradient(38.82235px at 253.77045px 8.36277px, rgba(169, 124, 5, 0.06761), rgba(169, 124, 5, 0.06761) 96%, rgba(0, 0, 0, 0)), radial-gradient(41.30667px at 35.6084px 161.06054px, rgba(204, 31, 51, 0.3818), rgba(204, 31, 51, 0.3818) 96%, rgba(0, 0, 0, 0)), radial-gradient(38.00013px at 243.35356px 191.17846px, rgba(111, 223, 137, 0.84371), rgba(111, 223, 137, 0.84371) 96%, rgba(0, 0, 0, 0)), radial-gradient(12.14057px at 59.95475px 42.66822px, rgba(111, 20, 44, 0.56826), rgba(111, 20, 44, 0.56826) 96%, rgba(0, 0, 0, 0)), radial-gradient(25.29338px at 280.65497px 148.94768px, rgba(167, 31, 180, 0.7635), rgba(167, 31, 180, 0.7635) 96%, rgba(0, 0, 0, 0)), radial-gradient(6.28982px at 70.22695px 57.50014px, rgba(135, 67, 201, 0.89495), rgba(135, 67, 201, 0.89495) 96%, rgba(0, 0, 0, 0)), radial-gradient(10.79692px at 207.02352px 190.72594px, rgba(73, 172, 253, 0.72339), rgba(73, 172, 253, 0.72339) 96%, rgba(0, 0, 0, 0)), radial-gradient(29.33024px at 95.94448px 160.1365px, rgba(52, 193, 219, 0.74824), rgba(52, 193, 219, 0.74824) 96%, rgba(0, 0, 0, 0)), radial-gradient(16.04637px at 281.72386px 61.68872px, rgba(153, 86, 120, 0.59572), rgba(153, 86, 120, 0.59572) 96%, rgba(0, 0, 0, 0)), radial-gradient(26.23303px at 274.60903px 161.13904px, rgba(146, 130, 84, 0.8445), rgba(146, 130, 84, 0.8445) 96%, rgba(0, 0, 0, 0)), radial-gradient(20.63215px at 177.10505px 13.37177px, rgba(171, 24, 100, 0.71356), rgba(171, 24, 100, 0.71356) 96%, rgba(0, 0, 0, 0)), radial-gradient(27.39458px at 198.96598px 249.46414px, rgba(31, 172, 124, 0.12471), rgba(31, 172, 124, 0.12471) 96%, rgba(0, 0, 0, 0)), radial-gradient(37.28474px at 0.05144px 35.71232px, rgba(202, 55, 218, 0.1337), rgba(202, 55, 218, 0.1337) 96%, rgba(0, 0, 0, 0)), radial-gradient(48.12463px at 180.02515px 131.59507px, rgba(142, 88, 157, 0.91617), rgba(142, 88, 157, 0.91617) 96%, rgba(0, 0, 0, 0)), radial-gradient(35.66572px at 185.22354px 80.92422px, rgba(196, 169, 128, 0.51915), rgba(196, 169, 128, 0.51915) 96%, rgba(0, 0, 0, 0)), radial-gradient(28.66376px at 110.45366px 187.26299px, rgba(120, 74, 76, 0.51067), rgba(120, 74, 76, 0.51067) 96%, rgba(0, 0, 0, 0)), radial-gradient(47.38809px at 296.95973px 143.94716px, rgba(216, 126, 230, 0.73041), rgba(216, 126, 230, 0.73041) 96%, rgba(0, 0, 0, 0)), radial-gradient(34.05307px at 50.74134px 181.27114px, rgba(4, 8, 250, 0.22426), rgba(4, 8, 250, 0.22426) 96%, rgba(0, 0, 0, 0));
}
</style>

which looks like:

<div class="bokehs-rando"></div>

-> bokeh-portait-1 and bokeh-portrait 2 are from here: http://icanbecreative.com/article/be-inspired-gorgeous-showcase-of-bokeh-inspired-female-portrait-photography/

## CSS Shapes

Now, we can also use CSS Shapes to create an outline

--> shapes outline the person

{% include css-effects.html %}