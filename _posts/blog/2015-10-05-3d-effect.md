---
layout: post
title: CSS Image Effects &num;2&colon; 3D Image
permalink: /3d-effect
date: '2015-10-05'
comments: true
tags:
- development
- design
- css
- sass
- filter
- blend mode
- photo
- effect
- 3d
subtitle: How do you make 3D graphics in the browser? We'll look at how blend modes work together to create this effect.
header-bg: ../images/posts/css-effects/2/cinema.jpg
---

This is part of a series of posts breaking down visual effects using CSS filters and blend modes. Read [Part 1: The Vintage Washout Effect](/vintage-washout) for some background on the lighten blend mode and to learn how to make a nice faded photo effect.

--> spy kids

## The Dark Side

In the last [post](/vintage-washout) in this series, I took a look at the **lighten** blend mode. In this post, we'll take a look at its evil twin -- the **darken** blend mode.

Okay, why do I call it the evil twin? Well let's take a look at what's going on here. The blend mode is only applied to the top color:

![normal, lighten and darken blend modes](../images/posts/css-effects/2/blendmodes--list.png)

<p class="caption">I added a grey background this time to better visualize the lightened item.</p>

So, what happens when you apply a lighten blend mode on top of a darken blend mode? **They intersect and cancel out!** This is also true with multiply/screen and color-burn/color-dodge because the way that the math is applied is an inverse of the other.

![intersecting blend modes](../images/posts/css-effects/2/blendmodes--lightendarken.png)

In this visualization, the numbers correspond with layer order. You can see that when the blue circle in lighten mode and the blue circle in darken mode intersect, they cancel out to return to their original blue color as though there were no blend mode applied at all.

## 3D Images

Okay, so what does that have to do with 3D images? *Everything!* We can now use a bit of intersection to show the original image, and combine it with what we learned last week about how to determine shadow colors to create a 3D effect!

<img style="max-width: 600px" src="../images/posts/css-effects/2/3D-Avatar-movie.jpg" alt="" class="right">

If you look at these images, there is a red layer, a cyan layer, and they are separated on either side of the original image by a certain spread (we will use `$dist` for this value in the example `@mixin` below). So the steps for this are to use cyan and red with lighten blend modes as additional backgrounds to convert the dark tones to 3D tones and then space these two images apart from each other.

## Blending the Blend Modes

## Movement

## Live Example

## Mixin time

Sass (.scss)

```
@mixin three-dee($img, $dist: 5px, $width: 500px, $height: 500px) {
    z-index: 1;
    width: $width + $dist;
    height: $height;
    overflow: hidden;
    background: url('#{$img}'), cyan;
    background-blend-mode: lighten;
    background-size: cover;

  &:after {
    content: '';
    position: absolute;
    display: block;
    width: $width;
    height: $height;
    z-index: 2;
    margin-left: $dist;
    background: url('#{$img}'), red;
    background-blend-mode: lighten;
    background-size: cover;
    mix-blend-mode: darken;
  }
}

.cats-in-action {
  @include three-dee('img/cat.jpg', 6px, 800px, 600px);
}
```

CSS Output:

```css
.cats-in-action {
  z-index: 1;
  width: 806px;
  height: 600px;
  overflow: hidden;
  background: url("img/cat.jpg"), cyan;
  background-blend-mode: lighten;
  background-size: cover;
}

.cats-in-action:after {
  content: '';
  position: absolute;
  display: block;
  width: 800px;
  height: 600px;
  z-index: 2;
  margin-left: 6px;
  background: url("img/cat.jpg"), red;
  background-blend-mode: lighten;
  background-size: cover;
  mix-blend-mode: darken;
}
```